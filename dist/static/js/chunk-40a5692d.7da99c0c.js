(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40a5692d"],{"363b":function(e,t,a){"use strict";a("9140")},"3f26":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"problem_manage"},[a("div",{staticClass:"top-search-box"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"操作日期"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.changeDate},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{size:"small",clearable:"",placeholder:"项目名称"},on:{input:e.changeDebounce},model:{value:e.getParams.project_name,callback:function(t){e.$set(e.getParams,"project_name",t)},expression:"getParams.project_name"}})],1),a("el-form-item",{attrs:{label:"异常项"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{size:"small",clearable:"",placeholder:"异常项"},on:{input:e.changeDebounce},model:{value:e.getParams.unusual_item,callback:function(t){e.$set(e.getParams,"unusual_item",t)},expression:"getParams.unusual_item"}})],1),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{size:"small",clearable:"",placeholder:"说明"},on:{input:e.changeDebounce},model:{value:e.getParams.explanation,callback:function(t){e.$set(e.getParams,"explanation",t)},expression:"getParams.explanation"}})],1),a("el-form-item",{attrs:{label:"负责部门"}},[a("el-select",{staticStyle:{width:"170px"},attrs:{clearable:"",placeholder:"请选择负责部门"},on:{"visible-change":e.getOptionsSection,change:e.changeList},model:{value:e.getParams.department,callback:function(t){e.$set(e.getParams,"department",t)},expression:"getParams.department"}},e._l(e.sectionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.global_name}})})),1)],1),a("el-form-item",[a("el-upload",{staticStyle:{"margin-left":"8px",display:"inline-block"},attrs:{action:"string",accept:".xls, .xlsx","http-request":e.Upload,"show-file-list":!1}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["problem","import"],expression:"['problem','import']"}],attrs:{size:"small",type:"blue"}},[e._v("导入Excel")])],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["problem","export"],expression:"['problem','export']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"blue",size:"small",loading:e.btnExportLoad},on:{click:e.exportFun}},[e._v("导出Excel")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["problem","add"],expression:"['problem','add']"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"blue"},on:{click:e.showAddDialog}},[e._v("新建")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"blue"},on:{click:e.lookEcharts}},[e._v("查看饼图")])],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"center-box"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",stripe:""}},[a("af-table-column",{attrs:{prop:"project_name",label:"项目名称"}}),a("af-table-column",{attrs:{prop:"problem_title",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return a.preventDefault(),e.showEditDialog(t.row,!0)}}},[e._v(e._s(t.row.problem_title))])]}}])}),a("af-table-column",{attrs:{prop:"seq",label:"序号"}}),a("af-table-column",{attrs:{prop:"raise_date",label:"提出日期"}}),a("af-table-column",{attrs:{prop:"unusual_item",label:"异常项"}}),a("af-table-column",{attrs:{prop:"solution",label:"解决措施"}}),a("af-table-column",{attrs:{prop:"explanation",label:"说明"}}),a("af-table-column",{attrs:{prop:"department",label:"负责部门"}}),a("af-table-column",{attrs:{prop:"hope_date",label:"希望解决时间"}}),a("af-table-column",{attrs:{prop:"plan_date",label:"计划解决时间"}}),a("af-table-column",{attrs:{prop:"actual_date",label:"实际解决时间"}}),a("af-table-column",{attrs:{prop:"status",label:"状态"}}),a("af-table-column",{attrs:{prop:"remark",label:"备注"}}),a("af-table-column",{attrs:{fixed:"right",label:"操作",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["problem","change"],expression:"['problem','change']"}],attrs:{size:"mini",type:"blue"},on:{click:function(a){return e.showEditDialog(t.row,!1)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["problem","delete"],expression:"['problem', 'delete']"}],attrs:{size:"mini",type:"danger",disabled:e.btnLoading},on:{click:function(a){return e.handleUserDelete(t.row)}}},[e._v(" 删除 ")])]}}])})],1)],1),a("el-footer",{attrs:{id:"footer"}},[a("page",{attrs:{"old-page":!1,total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}})],1),a("el-dialog",{attrs:{title:e.dialogForm.id?"修改项目问题点":"新建项目问题点",visible:e.dialogVisible,width:"850px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogForm",attrs:{inline:"",rules:e.rules,model:e.dialogForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"项目",prop:"project_name"}},[a("el-input",{attrs:{disabled:!!e.dialogForm.id},model:{value:e.dialogForm.project_name,callback:function(t){e.$set(e.dialogForm,"project_name",t)},expression:"dialogForm.project_name"}})],1),a("el-form-item",{attrs:{label:"标题",prop:"problem_title"}},[a("el-input",{attrs:{disabled:e.isLook},model:{value:e.dialogForm.problem_title,callback:function(t){e.$set(e.dialogForm,"problem_title",t)},expression:"dialogForm.problem_title"}})],1),a("el-form-item",{attrs:{label:"序号",prop:"seq"}},[a("el-input-number",{staticStyle:{width:"250px"},attrs:{disabled:e.isLook,"controls-position":"right"},model:{value:e.dialogForm.seq,callback:function(t){e.$set(e.dialogForm,"seq",t)},expression:"dialogForm.seq"}})],1),a("el-form-item",{attrs:{label:"异常项"}},[a("el-input",{attrs:{disabled:e.isLook},model:{value:e.dialogForm.unusual_item,callback:function(t){e.$set(e.dialogForm,"unusual_item",t)},expression:"dialogForm.unusual_item"}})],1),a("el-form-item",{attrs:{label:"提出日期",prop:"raise_date"}},[a("el-date-picker",{attrs:{disabled:e.isLook,type:"date",placeholder:"提出日期","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.raise_date,callback:function(t){e.$set(e.dialogForm,"raise_date",t)},expression:"dialogForm.raise_date"}})],1),a("el-form-item",{attrs:{label:"异常项"}},[a("el-input",{attrs:{disabled:e.isLook},model:{value:e.dialogForm.unusual_item,callback:function(t){e.$set(e.dialogForm,"unusual_item",t)},expression:"dialogForm.unusual_item"}})],1),a("el-form-item",{attrs:{label:"解决措施"}},[a("el-input",{attrs:{disabled:e.isLook},model:{value:e.dialogForm.solution,callback:function(t){e.$set(e.dialogForm,"solution",t)},expression:"dialogForm.solution"}})],1),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{disabled:e.isLook},model:{value:e.dialogForm.explanation,callback:function(t){e.$set(e.dialogForm,"explanation",t)},expression:"dialogForm.explanation"}})],1),a("el-form-item",{attrs:{label:"负责部门",prop:"department"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{disabled:e.isLook,placeholder:"请选择负责部门"},on:{"visible-change":e.getOptionsSection},model:{value:e.dialogForm.department,callback:function(t){e.$set(e.dialogForm,"department",t)},expression:"dialogForm.department"}},e._l(e.sectionList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.global_name}})})),1)],1),a("el-form-item",{attrs:{label:"希望解决时间"}},[a("el-date-picker",{attrs:{disabled:e.isLook,type:"date",placeholder:"希望解决时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.hope_date,callback:function(t){e.$set(e.dialogForm,"hope_date",t)},expression:"dialogForm.hope_date"}})],1),a("el-form-item",{attrs:{label:"计划解决时间"}},[a("el-date-picker",{attrs:{disabled:e.isLook,type:"date",placeholder:"计划解决时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.plan_date,callback:function(t){e.$set(e.dialogForm,"plan_date",t)},expression:"dialogForm.plan_date"}})],1),a("el-form-item",{attrs:{label:"实际解决时间"}},[a("el-date-picker",{attrs:{disabled:e.isLook,type:"date",placeholder:"实际解决时间","value-format":"yyyy-MM-dd"},model:{value:e.dialogForm.actual_date,callback:function(t){e.$set(e.dialogForm,"actual_date",t)},expression:"dialogForm.actual_date"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{disabled:e.isLook,placeholder:"请选择状态"},on:{"visible-change":e.getStatus},model:{value:e.dialogForm.status,callback:function(t){e.$set(e.dialogForm,"status",t)},expression:"dialogForm.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.global_name}})})),1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{disabled:e.isLook},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1),a("el-form-item",{attrs:{label:"上传图片"}},[e.isLook?e._e():a("el-upload",{ref:"elUploadImg",attrs:{"on-remove":e.handleRemove,"file-list":e.objList,action:"","auto-upload":!1,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-change":e.onChangeImg,accept:".jpeg, .jpg, .png","on-exceed":e.onExceed,limit:5}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogVisibleImg,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._l(e.dialogForm.images,(function(t,i){return[e.isLook&&e.dialogForm.images.length>0?a("el-image",{key:i,staticStyle:{width:"100px",height:"100px"},attrs:{src:t,"preview-src-list":[t]}}):e._e()]})),e.isLook&&0===e.dialogForm.images.length?a("div",[e._v(" 暂无图片 ")]):e._e()],2),a("br"),a("el-form-item",{attrs:{label:"上传视频"}},[e.isLook?e._e():a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("仅支持mp4视频格式，大小不超过50M，视频时长不超过15秒，最多可一共上传3个视频")]),e.isLook?e._e():a("el-upload",{attrs:{action:"api/v1/projects/resource-upload/",data:{ownership:e.dialogForm.project_name},name:"resource","list-type":"picture-card",limit:3,"on-success":e.changeUrl,"before-upload":e.beforeAvatarUpload,"file-list":e.videoList,accept:".mp4"},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return a("div",{staticStyle:{height:"100%"}},[i?a("video",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.dialogVideoUrl,width:"100%",height:"100%"}}):e._e(),i?a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handleVideoPreview(i)}}},[a("i",{staticClass:"el-icon-video-play"})]),a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemoveVideo(i)}}},[a("i",{staticClass:"el-icon-delete"})])]):e._e()])}}],null,!1,3715226486)},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),a("el-dialog",{attrs:{visible:e.dialogVisibleVideo,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisibleVideo=t}}},[a("video",{attrs:{width:"100%",controls:"controls",src:e.dialogVideoUrl}})]),e._l(e.dialogForm.videos,(function(t,i){return[e.isLook&&e.dialogForm.videos.length>0?a("video",{key:i,staticStyle:{width:"600px",height:"300px"},attrs:{controls:"controls",src:t}}):e._e()]})),e.isLook&&0===e.dialogForm.videos.length?a("div",[e._v(" 暂无视频 ")]):e._e()],2),a("br"),a("el-form-item",{attrs:{label:"上传文件"}},[e.isLook?e._e():a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","file-list":e.fileList,"http-request":e.upExcel,"on-remove":e.handleRemoveFile,multiple:"",accept:".xls, .xlsx, .doc, .docx","on-exceed":e.exceed,limit:1}},[a("el-button",{attrs:{type:"blue",size:"small"}},[e._v("选择文件")])],1),e.isLook&&e.fileList.length>0?a("el-button",{attrs:{type:"blue",size:"small"},on:{click:e.templateDownload}},[e._v("下载文件")]):e._e(),e.isLook&&0===e.fileList.length?a("div",[e._v("暂无文件")]):e._e()],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleClose(!1)}}},[e._v("取 消")]),e.isLook?e._e():a("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.submitFun}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"饼图查看",visible:e.dialog,width:"770px"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"分析维度"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择分析维度"},on:{change:e.lookEcharts},model:{value:e.search.analysis_type,callback:function(t){e.$set(e.search,"analysis_type",t)},expression:"search.analysis_type"}},e._l(["部门","状态"],(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("div",{staticStyle:{width:"700px",height:"700px"},attrs:{id:"doughnutChart"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},l=[],o=a("c7eb"),r=a("1da1"),s=(a("b0c0"),a("c740"),a("a434"),a("ac1f"),a("841c"),a("e9c4"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("caad"),a("159b"),a("d718")),n=a("313e"),c=a("ed08"),d=a("6c18"),u={name:"ProblemManage",components:{page:s["a"]},data:function(){return{dateValue:[],tableData:[],isLook:!1,rules:{project_name:[{required:!0,message:"不能为空",trigger:"blur"}],problem_title:[{required:!0,message:"不能为空",trigger:"blur"}],seq:[{required:!0,message:"不能为空",trigger:"blur"}],raise_date:[{required:!0,message:"不能为空",trigger:"change"}],department:[{required:!0,message:"不能为空",trigger:"change"}],status:[{required:!0,message:"不能为空",trigger:"change"}]},dialog:!1,dialogImageUrl:"",dialogVideoUrl:"",dialogVisibleImg:!1,dialogVisibleVideo:!1,videoList:[],objList:[],search:{analysis_type:"部门"},dialogForm:{},statusList:[],fileList:[],sectionList:[],dialogVisible:!1,total:0,btnExportLoad:!1,getParams:{page:1,page_size:20},btnLoading:!1,loading:!0,optionDoughnut:{tooltip:{trigger:"item"},legend:{top:"bottom",left:"center"},series:[{name:"项目问题统计",type:"pie",radius:["50%","70%"],center:["50%","45%"],avoidLabelOverlap:!0,label:{show:!0,formatter:function(e){return e.name+e.percent+"%\n ("+e.value+")"}},labelLine:{show:!0},emphasis:{label:{show:!0}},data:[]}]}}},created:function(){this.getList()},mounted:function(){},methods:{handleUserDelete:function(e){var t=this;this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.btnLoading=!0,Object(d["h"])("delete",e.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList(),t.btnLoading=!1})).catch((function(e){t.btnLoading=!1,t.$message.error("删除失败")}))}))},templateDownload:function(){window.open(""+this.fileList[0].url,"_self")},upExcel:function(e){var t=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var i,l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t.dialogForm.project_name){a.next=5;break}return t.fileList=[],t.$message("请先填写项目名称"),a.abrupt("return");case 5:return i=new FormData,i.append("resource",e.file),i.append("ownership",t.dialogForm.project_name),a.next=10,Object(d["k"])("post",null,{data:i});case 10:l=a.sent,t.dialogForm.add_datas.push({attachment_type:3,attachment_url:l.resource}),t.fileList=i,t.$message({message:"上传成功",type:"success"}),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](0),t.fileList=[];case 19:case"end":return a.stop()}}),a,null,[[0,16]])})))()},exceed:function(){this.$message({message:"最多上传一个，如需更换先移除",type:"warning"})},handleRemoveFile:function(e){var t=this.fileList.findIndex((function(t){return t.url===e.url}));this.fileList.splice(t,1),this.dialogForm.add_datas.splice(this.dialogForm.add_datas.findIndex((function(t){return t.attachment_url===e.url})),1)},lookEcharts:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!0,t.next=3,Object(d["i"])("get",null,{params:e.search});case 3:a=t.sent,e.optionDoughnut.series[0].data=a,e.$nextTick((function(){var t=n["init"](document.getElementById("doughnutChart"));t.setOption(e.optionDoughnut)}));case 6:case"end":return t.stop()}}),t)})))()},beforeAvatarUpload:function(e){if(!this.dialogForm.project_name)return this.videoList=[],void this.$message("请先填写项目名称");var t,a=JSON.parse(JSON.stringify(this.videoList)),i=URL.createObjectURL(e),l=new Audio(i),o=this;this.durationNumber=l.addEventListener("loadedmetadata",(function(e){return t=l.duration,!(t>15)||(o.$message("上传视频不能超过15秒,请重新上传"),o.$set(o,"videoList",a),!1)}))},changeUrl:function(e){this.dialogForm.add_datas.push({attachment_type:2,attachment_url:e.resource}),this.videoList.push({url:e.resource})},handleRemoveVideo:function(e){var t=this.videoList.findIndex((function(t){return t.url===e.url}));this.videoList.splice(t,1),this.dialogForm.add_datas.splice(this.dialogForm.add_datas.findIndex((function(t){return t.attachment_url===e.url})),1)},handleVideoPreview:function(e){this.dialogVideoUrl=e.url,this.dialogVisibleVideo=!0},onExceed:function(){this.$message.info("最多上传五张图片")},onChangeImg:function(e,t){var a=this;return Object(r["a"])(Object(o["a"])().mark((function i(){var l,r,s,n;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.dialogForm.project_name){i.next=4;break}return a.objList=[],a.$message("请先填写项目名称"),i.abrupt("return");case 4:if(l=["image/jpeg","image/jpg","image/png"].includes(e.raw.type),r=e.size/1024/1024<2,l){i.next=10;break}return a.$message.error("上传头像图片只能是 jpeg、jpg 、png格式!"),t.pop(),i.abrupt("return");case 10:if(r){i.next=14;break}return a.$message.error("上传头像图片大小不能超过 2MB!"),t.pop(),i.abrupt("return");case 14:return s=new FormData,s.append("resource",e.raw),s.append("ownership",a.dialogForm.project_name),i.prev=17,i.next=20,Object(d["k"])("post",null,{data:s});case 20:n=i.sent,a.objList.push({url:n.resource}),a.dialogForm.add_datas.push({attachment_type:1,attachment_url:n.resource}),i.next=28;break;case 25:i.prev=25,i.t0=i["catch"](17),a.$set(a,"objList",a.objList);case 28:case"end":return i.stop()}}),i,null,[[17,25]])})))()},handleRemove:function(e){var t=this.objList.findIndex((function(t){return t.url===e.url}));this.objList.splice(t,1),this.dialogForm.add_datas.splice(this.dialogForm.add_datas.findIndex((function(t){return t.attachment_url===e.url})),1)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisibleImg=!0},handleClose:function(e){this.$refs.elUploadImg&&this.$refs.elUploadImg.clearFiles(),this.$refs.dialogForm.resetFields(),this.dialogVisible=!1,this.disable=!1,e&&e()},showAddDialog:function(){this.dialogForm={},this.isLook=!1,this.objList=[],this.videoList=[],this.fileList=[],this.dialogForm.add_datas=[],this.dialogVisible=!0},showEditDialog:function(e,t){var a=this;this.isLook=t,this.dialogForm=JSON.parse(JSON.stringify(e)),this.objList=[],this.videoList=[],this.fileList=[],this.dialogForm.add_datas=[],this.dialogForm.images.forEach((function(e){a.dialogForm.add_datas.push({attachment_type:1,attachment_url:e})})),this.dialogForm.videos.forEach((function(e){a.dialogForm.add_datas.push({attachment_type:2,attachment_url:e})})),this.dialogForm.files.forEach((function(e){a.dialogForm.add_datas.push({attachment_type:3,attachment_url:e})})),this.dialogForm.images.forEach((function(e){return a.objList.push({url:e})})),this.dialogForm.videos.forEach((function(e){return a.videoList.push({url:e})})),this.dialogForm.files.forEach((function(e){return a.fileList.push({url:e})})),this.dialogVisible=!0},submitFun:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(r["a"])(Object(o["a"])().mark((function t(a){var i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=17;break}return t.prev=1,e.btnLoading=!0,i=e.dialogForm.id?"put":"post",t.next=6,Object(d["h"])(i,e.dialogForm.id||null,{data:e.dialogForm});case 6:e.$message.success("操作成功"),e.handleClose(null),e.getList(),e.btnLoading=!1,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.btnLoading=!1;case 15:t.next=18;break;case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}())},getStatus:function(e){var t=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=10;break}return a.prev=1,a.next=4,Object(d["b"])("get",null,{params:{all:1,class_name:"项目问题状态"}});case 4:i=a.sent,t.statusList=i.results||[],a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](1);case 10:case"end":return a.stop()}}),a,null,[[1,8]])})))()},getOptionsSection:function(e){var t=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=10;break}return a.prev=1,a.next=4,Object(d["b"])("get",null,{params:{all:1,class_name:"项目问题部门"}});case 4:i=a.sent,t.sectionList=i.results||[],a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](1);case 10:case"end":return a.stop()}}),a,null,[[1,8]])})))()},getList:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(d["h"])("get",null,{params:e.getParams});case 4:a=t.sent,e.tableData=a.results||[],e.total=a.count,e.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},changeDebounce:function(){Object(c["b"])(this,"changeList")},changeDate:function(e){this.getParams.raise_date_after=e?e[0]:"",this.getParams.raise_date_before=e?e[1]:"",this.changeList()},exportFun:function(){var e=this;this.btnExportLoad=!0;var t=Object.assign({export:1},this.getParams),a=d["h"];a("get",null,{params:t}).then((function(t){window.open(""+t.url,"_self"),e.btnExportLoad=!1})).catch((function(t){e.btnExportLoad=!1}))},changeList:function(){this.getParams.page=1,this.getList()},currentChange:function(e,t){this.getParams.page=e,this.getParams.page_size=t,this.getList()},Upload:function(e){var t=this,a=new FormData;a.append("import_file",e.file),Object(d["j"])("post",null,{data:a}).then((function(e){t.$message({type:"success",message:e}),t.getList()}))},dbclickDesc:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),this.$message.success("复制成功!"),document.body.removeChild(t)}}},p=u,m=(a("363b"),a("2877")),g=Object(m["a"])(p,i,l,!1,null,null,null);t["default"]=g.exports},4473:function(e,t,a){"use strict";a("accd")},9140:function(e,t,a){},accd:function(e,t,a){},d718:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","margin-top":"2px"}},[e.oldPage?a("el-pagination",{attrs:{disabled:!0,"current-page":e._currentPage,layout:"total,prev,pager,next","page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e._currentPage=t},"update:current-page":function(t){e._currentPage=t},"current-change":function(t){return e.currentChange(t,e.pageSize)}}}):a("div",{staticClass:"page-style",staticStyle:{display:"flex"}},[a("el-pagination",{attrs:{"current-page":e._currentPage,"page-sizes":e.options,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":function(t){return e.currentChange(1,t)},"current-change":function(t){return e.currentChange(t,e.pageSize)}}})],1)],1)},l=[],o=(a("a9e3"),{props:{total:{type:Number,default:0},pageSizeProps:{type:Number,default:20},currentPage:{type:Number,default:1},oldPage:{type:Boolean,default:!0}},data:function(){return{pageSize:this.pageSizeProps,options:[20,50,100]}},computed:{_currentPage:{get:function(){return this.currentPage},set:function(){return 1}}},methods:{currentChange:function(e,t){t&&(this.pageSize=t),this.oldPage?this.$emit("currentChange",e):this.$emit("currentChange",e,t)}}}),r=o,s=(a("4473"),a("2877")),n=Object(s["a"])(r,i,l,!1,null,null,null);t["a"]=n.exports}}]);